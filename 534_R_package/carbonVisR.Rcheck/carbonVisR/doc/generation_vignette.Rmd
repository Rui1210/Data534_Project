---
title: "generation_vignette"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{generation_vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r, include=FALSE}
if (!requireNamespace("htmltools", "0.5.7")) {
  install.packages("htmltools")
}
```


```{r setup}
library(carbonVisR)
```

# Introduction

The `carbonVisR` package provides a set of functions for visualizing carbon generation data. This vignette aims to explain the core functions of the package and demonstrate their usage.

# Functions

## 1. `validate_date_range`

The `validate_date_range` function is a help function for `carbon_generation` and `carbon_generation_visual`. It ensures the validity of a given date range, imposing specific constraints to guarantee meaningful results.

The input date range must not be earlier than May 11, 2018, and the date range cannot exceed 30 days. If the given dates violate these constraints, the function will throw an error with a descriptive message.

```{r validate_date_range}
# Example Usage
validate_date_range("2022-01-01", "2022-01-15")
```

## 2. `carbon_generation`

The `carbon_generation` function retrieves carbon generation mix data from the Carbon Intensity API for a specified date range.

The function internally calls `validate_date_range` to ensure the input date range is valid before making the API request. It then processes the obtained data, returning a dataframe containing information about the carbon generation mix. The date range is limited to a maximum of 30 days of daily reports.

```{r carbon_generation}
# Example Usage
df_carbon_generation <- carbon_generation("2022-01-01", "2022-01-15")
head(df_carbon_generation)
```

## 3. `carbon_generation_visual`

The `carbon_generation_visual` function supports three types of charts: line, stack, and pie. It visualizes carbon generation data based on the specified date range and chart type. The maximum data range is 30 days. It caters to different visualization needs. It leverages the carbon_generation function to fetch data and then utilizes ggplot2 for creating line and stack charts. For pie charts, it directly plots the data.

Note: The line and stack charts use daily data, reflecting the carbon generation mix for each day within the specified date range. In contrast, the pie chart represents the overall carbon generation mix throughout the entire date range, offering a comprehensive view of the data.

## Examples for carbon_generation_visual

### Line chart for carbon generation mix:

```{r line}
# Example Usage for Line Chart
line_chart <- carbon_generation_visual("2022-01-01", "2022-01-15", "line")
print(line_chart)

```

### Stack chart for carbon generation mix:

```{r stack}
# Example Usage for Stack Chart
stack_chart <- carbon_generation_visual("2022-01-01", "2022-01-15", "stack")
print(stack_chart)

```

### Pie chart for carbon generation mix:

```{r pie}
# Example Usage for Pie Chart
carbon_generation_visual("2022-01-01", "2022-01-15", "pie")

```
